{% extends 'backends/base_template.html' %}
{% load static %}

{% block title %}OTT 분석{% endblock %}

{% block content %}
<div class="main-body" style="padding:4%;">
    <!-- Top Section -->
    <section class="content-section container">

        <!-- 섹션 제목 -->
        <h2 class="section-heading text-center">2025년 상반기 1위 작품</h2>

        <!-- 커튼 + 카드 -->
        <div class="top-section">
            <div class="top-overlay text-center">
                <a href="{% url 'backends:detail' top_program.id %}" target="_blank" class="text-decoration-none">
                    <div class="card top-info-card mx-auto" style="cursor:pointer;">
                        <div class="card-body">
                            <img src="{{ poster }}" alt="{{ top_program.title }}" class="top-poster">
                            <h2 class="top-title">{{ top_program.title }}</h2>
                            <p class="top-genre">{{ top_program.genre }}</p>
                        </div>
                    </div>
</a>
            </div>
        </div>
    </section>

    <!-- 1. 장르 트렌드 변화 -->
    <section class="content-section container">
        <div class="card shadow content-card">
            <div class="card-header">2025년 상반기 Top 장르: {{ top_genre }}</div>
            <div class="card-body d-flex justify-content-center flex-wrap gap-4">

                {% for program in genre_top5 %}
                    <a href="{% url 'backends:detail' program.program_id %}" 
                    target="_blank" 
                    class="text-decoration-none">
                        <div class="card" style="width: 180px; cursor:pointer;">
                            <img src="{{ program.poster }}" class="card-img-top poster-sm" alt="{{ program.title }}">
                            <div class="card-body text-center">
                                <h6 class="card-title">{{ program.title }}</h6>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
            <!-- 카드 오른쪽 아래 버튼 -->
            <div class="card-footer text-end">
                <a href="{% url 'backends:genreTrend' %}" class="btn-more">
                    더 알아보기 →
                </a>
            </div>
        </div>
    </section>

    <!-- 2. 서브 장르 분포 -->
    <section class="content-section container">
        <div class="card shadow content-card">
            <div class="card-header">서브 장르 분포</div>
            <div class="card-body">
                <div id="subgenre-piechart" style="height:300px;"> </div>
            </div>
        </div>
    </section>

    <!-- 3. 평점 vs 조회수 -->
    <section class="content-section container">
        <div class="card shadow content-card">
            <div class="card-header">평점 vs 조회수</div>
            <div class="card-body">
                <div id="rating-views-scatter" style="height:300px;"></div>
            </div>
        </div>
    </section>

    <!-- 4. OTT별 독점률 -->
    <section class="content-section container">
        <a href="{% url 'backends:ottplatformTrend' %}" style="text-decoration:none; color:inherit; display:block;">
        <div class="card shadow content-card">
            <div class="card-header">OTT 독점률</div>
            <div class="card-body d-flex justify-content-around align-items-center flex-wrap">
                <!-- <img src="{% static 'logos/netflix.png' %}" alt="Netflix" class="ott-logo">
                <img src="{% static 'logos/disney.png' %}" alt="Disney+" class="ott-logo">
                <img src="{% static 'logos/wavve.png' %}" alt="Wavve" class="ott-logo"> -->
            </div>
        </div>
        </a>
    </section>

</div>





{% endblock %}
