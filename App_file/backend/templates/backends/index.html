{% extends 'backends/base_template.html' %}
{% load static %}

{% block title %}OTT 분석{% endblock %}

{% block content %}
<div class="main-body">

    <!-- Top Section -->
    <section class="top-section" 
        style="background-image: url('{% static "certain.png" %}');
            background-size: cover;
            background-position: center;">
        <div class="top-overlay text-center">
            <img src="{{ top_program.poster }}" alt="{{ top_program.title }}" class="top-poster">
            <h2 class="top-title">{{ top_program.title }}</h2>
            <p class="top-genre">{{ top_program.genre }}</p>
        </div>
    </section>

    <!-- 1. 장르 트렌드 변화 -->
    <section class="content-section container">
        <div class="card shadow content-card">
            <div class="card-header">장르 트렌드 변화</div>
            <div class="card-body d-flex justify-content-center flex-wrap gap-3">
                {% for program in trend_program %}
                    <img src="{{ program.poster }}" class="poster-sm" alt="{{ program.title }}">
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- 2. 서브 장르 분포 -->
    <section class="content-section container">
        <div class="card shadow content-card">
            <div class="card-header">서브 장르 분포</div>
            <div class="card-body">
                <div id="subgenre-piechart" style="height:300px;"></div>
            </div>
        </div>
    </section>

    <!-- 3. 평점 vs 조회수 -->
    <section class="content-section container">
        <div class="card shadow content-card">
            <div class="card-header">평점 vs 조회수</div>
            <div class="card-body">
                <div id="rating-views-scatter" style="height:300px;"></div>
            </div>
        </div>
    </section>

    <!-- 4. OTT별 독점률 -->
    <section class="content-section container">
        <div class="card shadow content-card">
            <div class="card-header">OTT 독점률</div>
            <div class="card-body d-flex justify-content-around align-items-center flex-wrap">
                <!-- <img src="{% static 'logos/netflix.png' %}" alt="Netflix" class="ott-logo">
                <img src="{% static 'logos/disney.png' %}" alt="Disney+" class="ott-logo">
                <img src="{% static 'logos/wavve.png' %}" alt="Wavve" class="ott-logo"> -->
            </div>
        </div>
    </section>

</div>
{% endblock %}
